(this["webpackJsonppart2.phonebook"]=this["webpackJsonppart2.phonebook"]||[]).push([[0],{133:function(e,n,t){},134:function(e,n,t){},449:function(e,n,t){"use strict";t.r(n);var r=t(9),o=t.n(r),a=t(127),c=t.n(a),i=(t(133),t(73)),u=t(30),s=(t(134),t(39)),d=t.n(s),b="api/persons",l=function(){return d.a.get(b).then((function(e){return e.data}))},f=function(e){return d.a.post(b,e).then((function(e){return e.data}))},h=function(e,n){return d.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){d.a.delete(b+"/".concat(e))},m=(t(152),t(1)),O=function(e){var n=e.message,t=e.type?{backgroundColor:"rgba(123, 239, 178, 0.5)",fontSize:32,fontWeight:"bold"}:{backgroundColor:"rgba(255, 0, 0, 0.5)",fontSize:32,fontWeight:"bold"};return null===n?null:Object(m.jsx)("div",{className:"error",style:t,children:n})};function g(e){var n=e.name,t=e.number,r=e.id,o=e.deletePerson;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("span",{children:[n," ",t]}),Object(m.jsx)("button",{onClick:function(){return o(r,n)},children:"Delete"})]})}function p(e){var n=e.filterPersons,t=e.deletePerson;return Object(m.jsx)(m.Fragment,{children:n.map((function(e){return Object(m.jsx)(g,{id:e.id,name:e.name,number:e.number,deletePerson:t},e.id)}))})}function v(e){var n=e.filter,t=e.handleFilterChange;return Object(m.jsxs)("div",{children:["filter shown with ",Object(m.jsx)("input",{value:n,onChange:t})]})}function x(e){var n=e.handleSubmit,t=e.handleNameChange,r=e.handleNumberChange,o=e.newName,a=e.newNumber;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:o,onChange:t})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:a,onChange:r})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})}var w=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)({errorMessage:"",errorType:!0}),c=Object(u.a)(a,2),s=c[0],d=c[1],b=Object(r.useState)(""),g=Object(u.a)(b,2),w=g[0],C=g[1],y=Object(r.useState)(""),S=Object(u.a)(y,2),k=S[0],N=S[1],P=Object(r.useState)(""),L=Object(u.a)(P,2),F=L[0],T=L[1],M=function(e,n){d({errorMessage:e,errorType:n}),setTimeout((function(){d({errorMessage:"",errorType:!0})}),2e3)};Object(r.useEffect)((function(){l().then((function(e){return o(e)}))}),[]);var D=F?t.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())})):t;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(O,{message:s.errorMessage,type:s.errorType}),Object(m.jsx)(v,{filter:F,handleFilterChange:function(e){T(e.target.value)}}),Object(m.jsx)("h3",{children:"add a new "}),Object(m.jsx)(x,{handleSubmit:function(e){if(e.preventDefault(),w&&k){if(t.find((function(e){return e.name.toLowerCase()===w.toLowerCase()}))){if(window.confirm("".concat(w," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name.toLowerCase()===w.toLowerCase()})),r=Object(i.a)(Object(i.a)({},n),{},{number:k});return h(n.id,r).then((function(e){o(t.map((function(n){return n.id!==e.id?n:e}))),M("".concat(e.name,"'s number was changed to ").concat(e.number),!0)})).catch((function(e){M(e.response.data,!1)})),C(""),void N("")}return C(""),void N("")}var a={name:w,number:k};f(a).then((function(e){o(t.concat(e)),M("".concat(a.name," was successfully added to the phonebook!"),!0)})).catch((function(e){return M(e.response.data,!1)})),C(""),N("")}else alert("Please complete both fields to submit a new registry addition")},newName:w,handleNameChange:function(e){C(e.target.value)},newNumber:k,handleNumberChange:function(e){N(e.target.value)}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(p,{filterPersons:D,deletePerson:function(e,n){window.confirm("Delete ".concat(n,"?"))&&(j(e),o(t.filter((function(n){return n.id!==e}))))}})]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,450)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,a=n.getLCP,c=n.getTTFB;t(e),r(e),o(e),a(e),c(e)}))};c.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root")),C()}},[[449,1,2]]]);
//# sourceMappingURL=main.dd0c5881.chunk.js.map